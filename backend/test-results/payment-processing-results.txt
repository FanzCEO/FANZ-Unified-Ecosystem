
> fanz-unified-ecosystem-backend@1.0.0 test
> jest tests/unit/payments.test.ts

â— Validation Warning:

  Unknown option "moduleNameMapping" with value {"^@/(.*)$": "<rootDir>/src/$1", "^@tests/(.*)$": "<rootDir>/tests/$1"} was found.
  This is probably a typing mistake. Fixing it will remove this message.

  Configuration Documentation:
  https://jestjs.io/docs/configuration

â— Validation Warning:

  Unknown option "moduleNameMapping" with value {"^@/(.*)$": "<rootDir>/src/$1", "^@tests/(.*)$": "<rootDir>/tests/$1"} was found.
  This is probably a typing mistake. Fixing it will remove this message.

  Configuration Documentation:
  https://jestjs.io/docs/configuration

ğŸš€ Setting up test environment...
ğŸ“Š Setting up test database...
âœ… Test database ready
ğŸ”´ Checking Redis availability...
âš ï¸ Redis not available, tests will use in-memory cache
âœ… Test environment setup complete
PASS tests/unit/payments.test.ts
  Payment Processing
    Payment Processing
      âœ“ should process a valid payment successfully (15 ms)
      âœ“ should handle payment failures gracefully (2 ms)
      âœ“ should reject payments with excessive amounts (2 ms)
      âœ“ should handle international payments correctly (2 ms)
      âœ“ should process micro payments (2 ms)
      âœ“ should store transaction data correctly (2 ms)
    Refund Processing
      âœ“ should process a full refund successfully (3 ms)
      âœ“ should process a partial refund successfully (3 ms)
      âœ“ should reject refunds for non-existent transactions (3 ms)
      âœ“ should reject refunds exceeding original transaction amount (3 ms)
      âœ“ should handle refund failures gracefully (4 ms)
      âœ“ should store refund data correctly (3 ms)
    Payout Processing
      âœ“ should process a valid payout successfully (2 ms)
      âœ“ should handle large payouts (2 ms)
      âœ“ should handle international payouts (1 ms)
      âœ“ should handle payout failures gracefully (2 ms)
      âœ“ should store payout data correctly (2 ms)
    Webhook Handling
      âœ“ should handle webhooks successfully (52 ms)
      âœ“ should validate webhook signatures (51 ms)
    Performance and Load Testing
      âœ“ should handle multiple concurrent payments (3 ms)
      âœ“ should maintain performance under load (14 ms)
    Edge Cases and Error Handling
      âœ“ should handle zero amount payments (2 ms)
      âœ“ should handle negative amounts gracefully (1 ms)
      âœ“ should handle very large numbers (10 ms)
      âœ“ should handle special characters in descriptions (2 ms)
    Test Utilities and Helpers
      âœ“ should provide access to all transactions (2 ms)
      âœ“ should allow clearing all data (1 ms)
      âœ“ should allow configuring success rates (3 ms)

Test Suites: 1 passed, 1 total
Tests:       28 passed, 28 total
Snapshots:   0 total
Time:        0.279 s, estimated 1 s
Ran all test suites matching /tests\/unit\/payments.test.ts/i.
ğŸ§¹ Cleaning up test environment...
ğŸ“Š Cleaning up test data...
ğŸ”Œ Closing connections...
âœ… Test environment cleanup complete
