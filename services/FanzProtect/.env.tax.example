# FanzProtect Tax Compliance Environment Configuration
# Copy to .env and update with your production values

# ====================================================================
# WYOMING BUSINESS ENTITY CONFIGURATION
# ====================================================================

# Wyoming LLC Information
WYOMING_BUSINESS_ENTITY=true
WYOMING_LLC_NAME="FANZ Legal Protection Services LLC"
WYOMING_EIN=""  # To be filled after EIN application
WYOMING_FORMATION_DATE=""  # YYYY-MM-DD format

# Wyoming Registered Agent
WYOMING_REGISTERED_AGENT="Wyoming Corporate Services"
WYOMING_REGISTERED_ADDRESS="1621 Central Ave, Suite 205, Casper, WY 82601"

# ====================================================================
# TAX CALCULATION SYSTEM
# ====================================================================

# Enable tax calculation system
TAX_CALCULATION_ENABLED=true

# Default exemption for legal services (Wyoming-based entity advantage)
DEFAULT_TAX_EXEMPT_LEGAL_SERVICES=true

# Conservative tax approach (collect when uncertain)
CONSERVATIVE_TAX_APPROACH=true

# Tax calculation timeout (milliseconds)
TAX_CALCULATION_TIMEOUT=5000

# ====================================================================
# DATABASE CONFIGURATION
# ====================================================================

# Primary database connection - Use one of the following:

# Option 1: Full PostgreSQL connection string
DATABASE_URL="postgresql://username:password@hostname:5432/database_name?sslmode=require"

# Option 2: Separate tax database connection
TAX_DB_CONNECTION_STRING="postgresql://tax_user:tax_password@hostname:5432/fanzprotect_tax?sslmode=require"

# Option 3: Neon Serverless PostgreSQL (recommended for production)
# DATABASE_URL="postgresql://username:password@ep-cool-cloud-123456.us-east-1.aws.neon.tech/fanzprotect?sslmode=require"

# Database pool configuration
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=5000

# ====================================================================
# ECONOMIC NEXUS MONITORING
# ====================================================================

# Enable real-time nexus monitoring
NEXUS_MONITORING_ENABLED=true

# Nexus threshold alert percentages
NEXUS_ALERT_MEDIUM=75     # Alert at 75% of threshold
NEXUS_ALERT_HIGH=90       # High alert at 90%
NEXUS_ALERT_CRITICAL=95   # Critical alert at 95%

# Automatic nexus establishment (when threshold exceeded)
AUTO_NEXUS_ESTABLISHMENT=true

# Days to look ahead for nexus projections
NEXUS_PROJECTION_DAYS=90

# ====================================================================
# FANZDASH INTEGRATION
# ====================================================================

# FanzDash API configuration for tax alerts
FANZDASH_API_URL="https://fanzdash.com/api"
FANZDASH_API_KEY=""  # Your FanzDash API key

# Tax alert webhook URL (sent from tax system to FanzDash)
NEXUS_ALERT_WEBHOOK_URL="https://fanzdash.com/api/tax-alerts"

# FanzDash dashboard integration
FANZDASH_TAX_DASHBOARD_ENABLED=true

# ====================================================================
# AUDIT AND COMPLIANCE
# ====================================================================

# Audit log retention (days) - 7 years for tax compliance
TAX_AUDIT_RETENTION_DAYS=2555

# Log level for tax operations
TAX_LOG_LEVEL="info"  # debug, info, warn, error

# Enable detailed audit logging
DETAILED_AUDIT_LOGGING=true

# Compliance reporting enabled
COMPLIANCE_REPORTING_ENABLED=true

# ====================================================================
# EXTERNAL TAX SERVICES (OPTIONAL)
# ====================================================================

# External tax calculation API (for validation)
# Note: Primary calculations use internal system
EXTERNAL_TAX_API_ENABLED=false
EXTERNAL_TAX_API_URL=""
EXTERNAL_TAX_API_KEY=""

# Sales tax API for rate updates (optional)
SALES_TAX_API_KEY=""
SALES_TAX_API_URL=""

# ====================================================================
# SECURITY AND ENCRYPTION
# ====================================================================

# Tax data encryption key (generate with: openssl rand -base64 32)
TAX_DATA_ENCRYPTION_KEY=""

# API authentication
TAX_API_SECRET_KEY=""  # For internal API authentication

# Admin access token
FANZPROTECT_ADMIN_TOKEN=""

# ====================================================================
# MONITORING AND ALERTING
# ====================================================================

# Enable monitoring service
TAX_MONITORING_ENABLED=true

# Monitoring schedule (cron format)
NEXUS_CHECK_SCHEDULE="0 6 * * *"     # Daily at 6 AM MST
WEEKLY_REPORT_SCHEDULE="0 8 * * 1"   # Monday at 8 AM MST
FILING_CHECK_SCHEDULE="0 9 1 * *"    # 1st of month at 9 AM MST

# Alert notification methods
SLACK_WEBHOOK_URL=""
ALERT_EMAIL_ADDRESS=""
ALERT_SMS_NUMBER=""

# ====================================================================
# DEVELOPMENT AND TESTING
# ====================================================================

# Environment
NODE_ENV="development"  # development, production

# Enable debug logging for development
DEBUG_TAX_CALCULATIONS=true

# Test mode (skip actual tax API calls)
TAX_TEST_MODE=false

# Mock payment processing
MOCK_PAYMENTS=true

# ====================================================================
# PERFORMANCE OPTIMIZATION
# ====================================================================

# Redis for caching (optional)
REDIS_URL=""

# Tax calculation caching (seconds)
TAX_CALC_CACHE_TTL=300

# Rate limiting for tax APIs
TAX_API_RATE_LIMIT=1000  # requests per minute

# ====================================================================
# DEPLOYMENT CONFIGURATION
# ====================================================================

# Application port
PORT=3000

# Health check endpoint
HEALTH_CHECK_ENABLED=true

# Metrics collection
METRICS_ENABLED=true

# ====================================================================
# WYOMING COMPLIANCE REMINDERS
# ====================================================================

# Annual report due date (YYYY-MM-DD)
WYOMING_ANNUAL_REPORT_DUE="2025-12-31"

# Reminder days before due date
WYOMING_REMINDER_DAYS=60

# Auto-schedule annual fee payment
AUTO_SCHEDULE_ANNUAL_FEE=true

# ====================================================================
# EXAMPLE VALUES FOR DEVELOPMENT
# ====================================================================

# Uncomment and modify for local development:
# DATABASE_URL="postgresql://localhost:5432/fanzprotect_dev"
# FANZDASH_API_URL="http://localhost:3001/api"
# TAX_TEST_MODE=true
# DEBUG_TAX_CALCULATIONS=true

# ====================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ====================================================================

# Before deploying to production:
# [ ] Set WYOMING_EIN after obtaining EIN
# [ ] Configure production DATABASE_URL
# [ ] Set FANZDASH_API_KEY with production key
# [ ] Generate TAX_DATA_ENCRYPTION_KEY
# [ ] Set strong TAX_API_SECRET_KEY
# [ ] Configure alert notification methods
# [ ] Set NODE_ENV=production
# [ ] Disable debug modes
# [ ] Verify SSL/TLS configuration
# [ ] Test database connectivity
# [ ] Run migration: npm run migrate:tax
# [ ] Verify tax calculations work correctly
# [ ] Test FanzDash integration

# ====================================================================
# SUPPORT AND DOCUMENTATION
# ====================================================================

# Documentation links:
# - Tax Compliance Guide: ./TAX_COMPLIANCE_GUIDE.md
# - Developer Guide: ./docs/TAX_DEVELOPER_GUIDE.md
# - Admin Guide: ./docs/TAX_ADMIN_GUIDE.md
# - Implementation Status: ./IMPLEMENTATION_STATUS.md

# Support contacts:
# - Technical Support: support@fanzprotect.com
# - Tax Compliance: tax@fanzprotect.com
# - Emergency: admin-emergency@fanzdash.com