# FANZ Ads Demo App - Development Dockerfile
# Optimized for Next.js hot reload and development

FROM node:18-alpine

# Install development dependencies
RUN apk add --no-cache \
    git \
    curl \
    bash

# Set working directory
WORKDIR /app

# Copy package files
COPY package*.json pnpm-lock.yaml* ./
COPY apps/fanz-ads-demo/package*.json apps/fanz-ads-demo/

# Install pnpm and dependencies
RUN npm install -g pnpm@8.15.1
RUN pnpm install --frozen-lockfile

# Copy source code
COPY apps/fanz-ads-demo/ apps/fanz-ads-demo/
COPY packages/ packages/

# Set working directory to app
WORKDIR /app/apps/fanz-ads-demo

# Expose port
EXPOSE 3100

# Environment variables
ENV NODE_ENV=development
ENV NEXT_TELEMETRY_DISABLED=1

# Development command with hot reload
CMD ["pnpm", "run", "dev"]